// trailing commas in objects and arrays gives IE a headache. It will puke badly. Offending commas removed.
var AG = AG || {};

AG.data = {"tags":[
    {
        "name":"Achiral Impurity analysis",
        "dataweight":"65",
        "fontsize":"4.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide10_Purity_Estradiol_large.jpg",
        "compounds":[
             {
                 "name":"Estradiol",
                 "slide":"Slide10_Purity_Estradiol",
                 "link":"http://www.waters.com/waters/library.htm?cid=134658367&lid=134667290"
             },
             {
                 "name":"Metoclopramide",
                 "slide":"Slide13_Metoclopramide_RP_UPC2"
             }
        ]
    },
    {
        "name":"Carotenoids",
        "dataweight":"65",
        "fontsize":"4.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide22_Carotene_UPC2_large.jpg",
        "compounds":[
             {
                 "name":"Carotenoids",
                 "slide":"Slide22_Carotene_UPC2"
             }
        ]
    },
    {
        "name":"Chiral method development",
        "dataweight":"65",
        "fontsize":"3.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide3_RapidChiralMD_Carprofen_UPC2_large.jpg",
        "compounds":[
             {
                 "name":"Carprofen",
                 "slide":"Slide3_RapidChiralMD_Carprofen_UPC2"
             },
             {
                 "name":"Oxfendazole & Pantroprazole",
                 "slide":"Slide6_ChiralMD_Oxfendazole_Pantoprazole",
                 "link":"http://www.waters.com/waters/library.htm?cid=134658367&lid=134667266"
             }
        ]
    },
    {
        "name":"Chiral pesticides",
        "dataweight":"65",
        "fontsize":"4.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide5_ChiralPesticideSep_Permethrin_large.jpg",
        "compounds":[
             {
                 "name":"Permethrin",
                 "slide":"Slide5_ChiralPesticideSep_Permethrin",
                 "link":"http://www.waters.com/waters/library.htm?cid=134658367&lid=134667299"
             }
        ]
    },
    {
        "name":"Drugs of abuse",
        "dataweight":"65",
        "fontsize":"3.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide7_ChiralSep_Meth-Drugs_UPC2_MSMS_large.jpg",
        "compounds":[
             {
                 "name":"Methamphetamine",
                 "slide":"Slide7_ChiralSep_Meth-Drugs_UPC2_MSMS"
             }
        ]
    },
    {
        "name":"Enantiomeric excess",
        "dataweight":"65",
        "fontsize":"3.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide4_EnantiomericBenzylMandealte_UPC2_large.jpg",
        "compounds":[
             {
                 "name":"Benzly Mandelate",
                 "slide":"Slide4_EnantiomericBenzylMandealte_UPC2",
                 "link":"http://www.waters.com/waters/library.htm?cid=134658367&lid=134667293"
             }
        ]
    },
    {
        "name":"Explosives",
        "dataweight":"40",
        "fontsize":"8.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide20_14Explosives_UPC2_large.jpg",
        "compounds":[
             {
                 "name":"Explosives",
                 "slide":"Slide20_14Explosives_UPC2"
             }
         ]          
    },
    {
        "name":"Fat-soluble vitamins",
        "dataweight":"65",
        "fontsize":"4.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide12_Sep_VitaminE_Capsule_large.jpg",
        "compounds":[
             {
                 "name":"Vitamin E Capsule",
                 "slide":"Slide12_Sep_VitaminE_Capsule",
                 "link":"http://www.waters.com/waters/library.htm?cid=134658367&lid=134690597"
             }
        ]
    },
    {
        "name":"Geometric isomers",
        "dataweight":"65",
        "fontsize":"3.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide16_Sep_GeometricIsomers_UPC2_large.jpg",
        "compounds":[
             {
                 "name":"Geometric isomers",
                 "slide":"Slide16_Sep_GeometricIsomers_UPC2"
             }
        ]
    },
    {
        "name":"Non-ionic surfactants",
        "dataweight":"65",
        "fontsize":"4.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide18_Non-IonicSurfactants_UPC2_large.jpg",
        "compounds":[
             {
                 "name":"Non-ionic surfactants",
                 "slide":"Slide18_Non-IonicSurfactants_UPC2"
             }
        ]
    },
    {
        "name":"Organic light-emitting diodes (OLEDs)",
        "dataweight":"65",
        "fontsize":"4.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide15_Mixture_OLED_Devices_large.jpg",
        "compounds":[
             {
                 "name":"Mixture OLED Devices",
                 "slide":"Slide15_Mixture_OLED_Devices",
                 "link":"http://www.waters.com/waters/library.htm?cid=134658367&lid=134675651"
             }
        ]
    },
    {
        "name":"Polar lipids",
        "dataweight":"65",
        "fontsize":"7.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide14_PolarLipidsMouseHeart_UPC2_large.jpg",
        "compounds":[
             {
                 "name":"Mouse Heart extract",
                 "slide":"Slide14_PolarLipidsMouseHeart_UPC2"
             }
        ]
    },
    {
        "name":"Polymer additives",
        "dataweight":"65",
        "fontsize":"4.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide19_PolymerAdditives_UPC2_large.jpg",
        "compounds":[
             {
                 "name":"Polymer additives",
                 "slide":"Slide19_PolymerAdditives_UPC2"
             }
        ]
    },
    {
        "name":"Rapid chiral screening",
        "dataweight":"65",
        "fontsize":"4.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide1_ChiralSepBinolNPLC_UPC2_large.jpg",
        "compounds":[
             {
                 "name":"Binol",
                 "slide":"Slide1_ChiralSepBinolNPLC_UPC2",
                 "link":"http://www.waters.com/waters/library.htm?cid=134658367&lid=134667263"
             },
             {
                 "name":"Warfarin",
                 "slide":"Slide2_ChiralSepWarfarinNPLC_UPC2"
             }
        ]
    },
    {
        "name":"Sudan dyes",
        "dataweight":"65",
        "fontsize":"7.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide17_SudanDyes_Photoresist_UPC2_large.jpg",
        "compounds":[
             {
                 "name":"Sudan dyes",
                 "slide":"Slide17_SudanDyes_Photoresist_UPC2",
                 "link":"http://www.waters.com/waters/library.htm?cid=134658367&lid=134689986"
             }
        ]
    },
    {
        "name":"USP methods",
        "dataweight":"40",
        "fontsize":"6.00ex",
        "color":"",
        "href":"img/graphs/large-960/Slide8_Assay_DrugAnthralin_large.jpg",
        "compounds":[
             {
                 "name":"Anthralin",
                 "slide":"Slide8_Assay_DrugAnthralin",
                 "link":"http://www.waters.com/waters/library.htm?cid=134658367&lid=134667256"
             },
             {
                 "name":"Tolbutamide",
                 "slide":"Slide9_CGram_Assay_Tolbutamide",
                 "link":"http://www.waters.com/waters/library.htm?cid=134658367&lid=134667307"
             },
             {
                 "name":"Dapsone Tablets",
                 "slide":"Slide11_DapsoneTablets",
                 "link":"http://www.waters.com/waters/library.htm?cid=134658367&lid=134667284"
             }
        ]
    }
]}


AG.Compounds = (function() {
    var getSlideImage = function(compoundGroupId, compoundId) {    
            console.log('a ' + compoundGroupId + ' b ' + compoundId);
            if (!compoundId) {
                compoundId = 0;
            }
            return AG.data.tags[compoundGroupId].compounds[compoundId].slide;
        },
        getSlideImagePath = function(compoundGroupId, compoundId) {
            if (!compoundId) {
                compoundId = 0;
            }
            var slide = getSlideImage(compoundGroupId, compoundId);
            return "img/graphs/small-474x577/" + slide + "_small.png";
        },
        getLargeImagePath = function(compoundGroupId, compoundId) {
            if (!compoundId) {
                compoundId = 0;
            }
            var slide = getSlideImage(compoundGroupId, compoundId);
            return "img/graphs/large-960/" + slide + "_large.png";
        },
        getSlideLink = function(compoundGroupId, compoundId) {
            if (!compoundId) {
                compoundId = 0;
            }
            return AG.data.tags[compoundGroupId].compounds[compoundId].link;
        }
        
    return {
        activate : function(compoundGroupId, compoundId) {

            var compoundBox = '#compound-group-' + compoundGroupId;

            // de-activate any active groups
            $('#compound-list li').removeClass('compound-group-active');
            $('#compound-list li ul').removeClass('compound-group-active');
            $('#compound-list li ul li').removeClass('compound-active');
            
            // activate the one that was clicked
            $(compoundBox).addClass('compound-group-active');
            $(compoundBox).parent('li').addClass('compound-group-active');
            $('#compound-' + compoundGroupId + '-' + compoundId).addClass('compound-active');
            
            // change image
            var image = getSlideImagePath(compoundGroupId, compoundId);
            $('#compound-image-small > img').attr('src', image);   
            
            // show or hide application link button
            var link = getSlideLink(compoundGroupId, compoundId);
            console.log('link ' + link);
            if (link == null) {
                $('.slide-button-wrapper').removeClass('slide-button-active');
            } else {
                $('.slide-button-wrapper').addClass('slide-button-active');
                $('.slide-button-wrapper div a').attr('href', link).attr('data-lytics', "||Explore*Clicks_Link*Get_The_Full_Application_Note");
            }   
        },
        enlarge : function() {
            AG.enlargePopup.show();
            //$("html,body").css("overflow","hidden");
            var smallPath = $('#compound-image-small img').attr('src');
            console.log('small ' + smallPath);
            // there were two, they can be chained
            var largePath = smallPath.replace("small-474x577", "large-960").replace("_small.png", "_large.jpg");
            console.log('lg ' + largePath);
            $('#imageOuter img').attr('src', largePath);
        }
    }

}());


